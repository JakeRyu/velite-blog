---
title: API를 구현하기 전에 문서화가 필요한 이유
description: API(애플리케이션 프로그래밍 인터페이스)는 현대적인 웹 또는 앱 개발, 그리고 시스템 통합에 있어 가장 먼저 고려되는 기술이다. API는 다른 시스템들이 원활하게 통신하고 데이터를 공유할 수 있게 해준다. 그러나 적절한 문서가 없다면 개발자들에게 혼란과 고통의 원인이 되기도 한다.
date: 2024-06-21
tags: ["api", "doc", "openapi", "raml"]
published: true
language: ko
---

빠르게 변화하는 소프트웨어 개발의 세계에서 성공의 핵심은 효율성과 명확한 의사소통이다. 이 두 가지를 크게 향상시킬 수 있지만, 종종 간과되는 관행 중 하나는 API 구현에 앞서 API를 먼저 문서화하는 것이다.

소프트웨어 개발 세계에서 "문서화 우선"이라는 만트라는 특히 API 개발에서 의미가 있다. API를 구현하기 전에 문서화하는 것이 언뜻 반대되는 순서처럼 보일 수 있으나, 이 접근법은 개발 프로세스를 크게 간소화하면서 전반적으로 프로젝트 결과를 개선할 수 있다. 이 글에서는 이 접근 방식의 이점과 OpenAPI와 같은 도구를 어떻게 사용하는지 알아본다.

# 소개

API(애플리케이션 프로그래밍 인터페이스)는 현대적인 웹 또는 앱 개발, 그리고 시스템 통합에 있어 가장 먼저 고려되는 기술이다. API는 다른 시스템들이 원활하게 통신하고 데이터를 공유할 수 있게 해준다. 그러나 적절한 문서가 없다면 개발자들에게 혼란과 고통의 원인이 되기도 한다. 구현 전에 API를 문서화함으로써, 개발을 위한 명확한 로드맵을 제시하고, 팀의 의사소통을 개선하며, 궁극적으로 시간과 자원을 절약할 수 있다.

# 구현 전 문서화의 세 가지 주요 이점

## 1. 동시적인 API 클라이언트 구현 가능

실제 API보다 API 문서가 먼저 준비되면, 클라이언트 개발자들은 즉시 API를 자신들의 애플리케이션에 통합하는 작업을 시작할 수 있다. 많은 문서화 도구들이 API 문서화와 함께 모의 서버 기능을 제공한다. 이 모의 서버는 미리 정의한 모의 응답을 제공하기 때문에 클라이언트 개발자들이 반기는 기능이다. 이러한 서버와 클라이언트 측의 병렬 개발은 전체 프로젝트 일정을 크게 단축할 수 있다.

## 2. 팀 커뮤니케이션 향상

잘 정리된 API 문서는 모든 개발자들에게 그 개념이나 정의를 일관되게 제공하는 단일 출처(single source of truth)이다. API가 어떻게 작동하는지, 어떤 엔드포인트가 사용 가능한지, 어떤 데이터 형식이 예상되는지를 명확히 정의한다. 이러한 명확성은 백엔드와 프론트엔드 팀 간의 의사소통을 개선하여 오해와 잠재적인 통합 문제를 줄이고, PO(Product Owner), BA(Buseness Analyst), QA(Quality Assurance)등 다른 역할을 하는  팀원들의 이해를 돕기도 한다. 

## 3. 궁극적으로 시간 절약

사전에 문서를 작성하는 것이 추가 작업처럼 보일 수 있으나, 장기적으로는 보상을 받게 된다. 좋은 문서는 유지 보수를 쉽게 만들고 새로운 팀원들의 적응 시간을 줄여준다. 또한 개발 중 반복적인 설명, 문제 해결, 기능 변경에 소요되는 시간을 크게   줄여준다.

# 상세 가이드: OpenAPI를 사용한 문서화

API 문서화를 위한 가장 인기 있는 사양 중 하나인 OpenAPI를 사용하여 API를 문서화하는 구체적인 방법을 살펴본다.

## OpenAPI 사용하기

OpenAPI를 사용하면 표준화된 형식으로 API의 엔드포인트, 요청/응답 형식, 인증 방법을 설명할 수 있다. 다음은 OpenAPI 사양의 예시다:

```yaml
openapi: 3.0.0
info:
  title: User Management API
  version: 1.0.0
paths:
  /users:
    get:
      summary: 사용자 목록 조회
      parameters:
        - in: query
          name: limit
          schema:
            type: integer
          description: 반환할 최대 사용자 수
      responses:
        '200':
          description: 사용자 객체의 JSON 배열
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
    post:
      summary: 새로운 사용자 생성
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewUser'
      responses:
        '201':
          description: 생성됨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        email:
          type: string
    NewUser:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
```

이 YAML 파일은 GET(사용자 조회)과 POST(새 사용자 생성) 메서드를 모두 지원하는 `/users` 엔드포인트가 있는 API를 설명한다. 또한 User와 NewUser 객체의 구조도 정의한다.

이 OpenAPI 사양은 API의 구조, 엔드포인트, 예상 입력 및 출력에 대한 명확하고 기계가 읽을 수 있는 설명을 제공한다. API 제공자와 소비자 간의 계약 역할을 하여 API의 기능에 대한 통합과 이해를 용이하게 한다.

## RAML 사용하기

RAML과 OpenAPI는 모두 API 설명 언어다. OpenAPI는 더 널리 채택되고 더 광범위한 도구 지원을 제공하는 반면, RAML은 간결한 구문과 가독성에 중점을 둔다. 둘 다 API 문서화와 설계를 표준화하는 유사한 목적을 제공한다.

```yaml
#%RAML 1.0
title: User Management API
version: 1.0.0
baseUri: http://api.example.com

types:
  User:
    type: object
    properties:
      id: integer
      name: string
      email: string
  NewUser:
    type: object
    properties:
      name: string
      email: string

/users:
  get:
    description: 사용자 목록 조회
    queryParameters:
      limit:
        type: integer
        description: 반환할 최대 사용자 수
    responses:
      200:
        body:
          application/json:
            type: User[]
            example:
              [
                { "id": 1, "name": John Doe", "email": "john@example.com" },
                { "id": 2, "name": Jane Smith", "email": "jane@example.com" }
              ]
  post:
    description: 새로운 사용자 생성
    body:
      application/json:
        type: NewUser
        example:
          { "name": Alice Johnson", "email": "alice@example.com" }
    responses:
      201:
        body:
          application/json:
            type: User
            example:
              { "id": 3, "name": Alice Johnson", "email": "alice@example.com" }
```

이 RAML 사양은 OpenAPI 예시와 동일한 API 기능을 설명한다:

1. 버전 1.0.0의 User Management API를 정의한다.
2. `User`와 `NewUser`라는 두 가지 데이터 유형을 지정한다.
3. 두 가지 메서드가 있는 `/users` 엔드포인트를 설명한다:
   - GET: 선택적 `limit` 쿼리 파라미터와 함께 사용자 목록을 검색한다.
   - POST: 새 사용자를 생성한다.
4. 두 메서드에 대한 예시 응답을 제공한다.

RAML과 OpenAPI의 주요 차이점은 구문과 구조에 있으나, 둘 다 API를 문서화하는 동일한 목적을 제공한다. RAML은 더 간결하고 구조를 보여주기 위해 들여쓰기를 사용하는 경향이 있는 반면, OpenAPI(특히 YAML 형식에서)는 더 명시적인 키-값 쌍을 사용한다.

# API 문서화를 위한 모범 사례

API 문서화를 가능한 한 효과적으로 만들기 위해 다음과 같은 모범 사례를 고려한다:

1. 문서 전체에 일관된 용어를 사용한다.
2. 각 엔드포인트, 파라미터, 응답에 대해 명확하고 간결한 설명을 제공한다.
3. 각 엔드포인트에 대한 요청과 응답의 예시를 포함한다.
4. 오류 응답과 코드를 문서화한다.
5. API가 발전함에 따라 문서를 최신 상태로 유지한다.

## API 문서 버전 관리

API가 발전함에 따라 문서의 버전을 관리하는 것이 중요하다. OpenAPI를 사용하면 사양의 `info` 섹션에서 버전을 지정할 수 있다. 주요 변경 사항을 만들 때는 문서의 새 버전을 만들고 API 소비자에게 변경 사항을 명확히 전달한다.

## 테스트를 위한 문서 사용

API 문서는 자동화된 테스트의 기반으로 사용될 수 있다. Postman과 같은 도구는 OpenAPI 사양을 가져와 자동으로 테스트 스위트를 생성할 수 있다. 이는 API 구현이 문서와 일치하는지 확인하여 불일치의 가능성을 줄인다.

## 실제 사례: Stripe API

인기 있는 결제 처리 플랫폼인 Stripe는 우수한 API 문서로 유명하다. 그들은 OpenAPI 사양을 사용하여 실행 가능한 예시, 명확한 설명, 사용자 친화적인 인터페이스를 포함하는 대화형 문서를 생성한다. 이 접근 방식은 Stripe의 개발자 친화적인 평판과 광범위한 채택에 크게 기여했다.

# 결론

API 문서화로 시작하는 것이 추가 단계처럼 보일 수 있으나, 이는 팀의 생산성을 크게 높이고 향후 문제를 줄인다. 명확한 문서화는 의사소통을 향상시키고, 병렬 개발을 용이하게 하며, 궁극적으로 오류와 오해를 최소화하여 시간을 절약한다.

OpenAPI와 같은 도구를 사용하고 모범 사례를 따름으로써, 개발 팀과 API 소비자에게 가치 있는 자원이 되는 포괄적이고 대화형인 문서를 만들 수 있다. 사람과 기계가 읽을 수 있는 사양이 없는 API는 설계, 구축, 테스트, 보안, 관리, 문서화 및 사용하기가 더 어렵다는 점을 기억해야 한다.

따라서 다음 API 코딩에 뛰어들기 전에 잠시 시간을 내어 먼저 문서화하는 것이 좋다. 미래의 당신, 당신의 팀, 그리고 API 소비자들이 감사할 것이다.



