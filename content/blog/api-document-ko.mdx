---
title: API를 구현하기 전에 문서화가 필요한 이유
description: API(애플리케이션 프로그래밍 인터페이스)는 현대적인 웹 또는 앱 개발, 그리고 시스템 통합에 있어 가장 먼저 고려되는 기술이다. API는 다른 시스템들이 원활하게 통신하고 데이터를 공유할 수 있게 해준다. 그러나 적절한 문서가 없다면 개발자들에게 혼란과 고통의 원인이 되기도 한다.
date: 2024-06-21
tags: ["api", "doc", "openapi", "raml"]
published: true
language: ko
---

빠르게 변화하는 소프트웨어 개발의 세계에서 성공의 핵심은 효율성과 명확한 의사소통이다. 이 두 가지를 크게 향상시킬 수 있지만, 종종 간과되는 관행 중 하나는 API 구현에 앞서 API를 먼저 문서화하는 것이다.

소프트웨어 개발 세계에서 "문서화 우선"이라는 만트라는 특히 API 개발에서 의미가 있다. API를 구현하기 전에 문서화하는 것이 언뜻 반대되는 순서처럼 보일 수 있으나, 이 접근법은 개발 프로세스를 크게 간소화하면서 전반적으로 프로젝트 결과를 개선할 수 있다. 이 글에서는 이 접근 방식의 이점과 OpenAPI와 같은 도구를 어떻게 사용하는지 알아본다.

# 소개

API(애플리케이션 프로그래밍 인터페이스)는 현대적인 웹 또는 앱 개발, 그리고 시스템 통합에 있어 가장 먼저 고려되는 기술이다. API는 다른 시스템들이 원활하게 통신하고 데이터를 공유할 수 있게 해준다. 그러나 적절한 문서가 없다면 개발자들에게 혼란과 고통의 원인이 되기도 한다. 구현 전에 API를 문서화함으로써, 개발을 위한 명확한 로드맵을 제시하고, 팀의 의사소통을 개선하며, 궁극적으로 시간과 자원을 절약할 수 있다.

# 구현 전 문서화의 세 가지 주요 이점

## 1. 동시적인 API 클라이언트 구현 가능

실제 API보다 API 문서가 먼저 준비되면, 클라이언트 개발자들은 즉시 API를 자신들의 애플리케이션에 통합하는 작업을 시작할 수 있다. 많은 문서화 도구들이 API 문서화와 함께 모의 서버 기능을 제공한다. 이 모의 서버는 미리 정의한 모의 응답을 제공하기 때문에 클라이언트 개발자들이 반기는 기능이다. 이러한 서버와 클라이언트 측의 병렬 개발은 전체 프로젝트 일정을 크게 단축할 수 있다.

## 2. 팀 커뮤니케이션 향상

잘 정리된 API 문서는 모든 개발자들에게 그 개념이나 정의를 일관되게 제공하는 단일 출처(single source of truth)이다. API가 어떻게 작동하는지, 어떤 엔드포인트가 사용 가능한지, 어떤 데이터 형식이 예상되는지를 명확히 정의한다. 이러한 명확성은 백엔드와 프론트엔드 팀 간의 의사소통을 개선하여 오해와 잠재적인 통합 문제를 줄이고, PO(Product Owner), BA(Buseness Analyst), QA(Quality Assurance)등 다른 역할을 하는  팀원들의 이해를 돕기도 한다. 

## 3. 궁극적으로 시간 절약

사전에 문서를 작성하는 것이 추가 작업처럼 보일 수 있으나, 장기적으로는 보상을 받게 된다. 좋은 문서는 유지 보수를 쉽게 만들고 새로운 팀원들의 적응 시간을 줄여준다. 또한 개발 중 반복적인 설명, 문제 해결, 기능 변경에 소요되는 시간을 크게   줄여준다.

# API 사양(API Specification)과 API 문서화

API 사양이 문서화를 위해 반드시 필요한 것은 아니지만, 사양이 있으면 문서화 과정이 훨씬 효율적이고 정확해진다. 사양 없이도 문서를 작성할 수는 있지만, 이는 더 많은 시간과 노력이 필요하며 오류의 가능성이 높아진다. 그 구체적인 이유는 다음과 같다.

## 1. 명확성과 일관성
API 사양은 API의 구조, 엔드포인트, 요청 및 응답 형식을 명확하게 정의한다. 이를 통해 문서화 과정에서 일관된 정보를 제공할 수 있다. 사양이 없다면 개발자가 직접 모든 정보를 수집하고 정리해야 하며, 이 과정에서 오류나 누락이 발생할 가능성이 높아진다.

## 2. 자동화
API 사양이 있으면 자동화 도구를 사용해 문서를 생성할 수 있다. OpenAPI(Swagger)와 같은 도구는 사양을 기반으로 상세한 문서를 자동으로 생성해준다. 사양이 없다면 이런 자동화 혜택을 누릴 수 없고, 모든 문서를 수작업으로 작성해야 한다.

## 3. 유지보수
API가 변경될 때마다 문서도 업데이트해야 한다. 사양이 있으면 변경 사항을 쉽게 추적하고 문서에 반영할 수 있다. 사양이 없다면 변경 사항을 일일이 확인하고 수작업으로 문서를 수정해야 하며, 이는 매우 번거롭고 오류의 가능성이 높다.

## 4. 협업
사양은 여러 개발자가 협업할 때 기준이 된다. 이를 통해 문서 작성 시 일관성을 유지할 수 있다. 사양이 없으면 각 개발자가 개별적으로 정보를 정리해야 하며, 이는 문서의 품질과 일관성에 영향을 미칠 수 있다.

## 5. 학습 곡선
사양이 있는 경우, 새로운 팀원이나 외부 개발자가 API를 이해하고 사용하는 데 도움이 된다. 명확하게 정의된 사양을 통해 API의 동작 방식을 빠르게 파악할 수 있다. 사양이 없으면 학습 곡선이 더 가파르고, 이해에 시간이 더 걸릴 수 있다.

# API 사양을 정의하고 문서화하는 도구들

API 사양을 정의하고 문서화하기 위해 많이 사용하는 도구들이 몇 가지 있다. 각 도구는 특정 기능과 장점을 가지고 있어서, 프로젝트의 요구 사항에 맞게 선택할 수 있다.

### 1. OpenAPI/Swagger
**OpenAPI Specification (OAS)** 는 API 사양을 위한 가장 널리 사용되는 표준 중 하나다. Swagger는 OpenAPI 사양을 작성하고 시각화하는 도구로 시작했으며, 이후 OpenAPI 사양의 일부로 통합되었다.
- **Swagger Editor**: 웹 기반의 편집기로, OpenAPI 사양을 작성하고 실시간으로 미리보기 할 수 있다.
- **Swagger UI**: 작성된 OpenAPI 사양을 기반으로 API 문서를 시각화해준다. 인터랙티브한 문서를 통해 API를 직접 테스트할 수 있다.
- **Swagger Codegen**: OpenAPI 사양을 기반으로 다양한 언어의 클라이언트 SDK와 서버 스텁 코드를 생성해준다.

### 2. Postman
Postman은 API 개발과 테스트를 위한 도구로 잘 알려져 있다. 최근에는 Postman에서 API 사양을 작성하고 문서화할 수 있는 기능도 제공하고 있다.
- **API Documentation**: Postman 내에서 API를 정의하고 자동으로 문서를 생성할 수 있다.
- **API Testing**: 정의된 API를 바로 테스트할 수 있는 기능을 제공한다.
- **Mock Server**: API의 모형 서버를 생성하여 실제 구현 전에 API 동작을 테스트할 수 있다.

### 3. Redoc
Redoc은 OpenAPI 사양을 기반으로 정적 HTML 문서를 생성해주는 도구다. 직관적이고 아름다운 UI를 제공하며, 대규모 API 문서화에 유용하다.
- **Customizable**: 테마와 레이아웃을 커스터마이징 할 수 있다.
- **Interactive**: 인터랙티브한 요소를 통해 API 엔드포인트를 쉽게 탐색할 수 있다.

### 4. RAML (RESTful API Modeling Language)
RAML은 RESTful API를 정의하기 위한 또 다른 언어다. RAML을 사용하면 API를 쉽게 정의하고 문서화할 수 있다.
- **API Designer**: 웹 기반의 RAML 편집기로, 실시간 미리보기를 제공한다.
- **API Console**: 정의된 RAML을 시각화하여 API 문서를 생성한다.

### 5. API Blueprint
API Blueprint는 간단한 마크다운 문법을 사용하여 API를 정의할 수 있는 언어다. 문서화뿐만 아니라 API 설계에도 유용하다.
- **Aglio**: API Blueprint를 기반으로 HTML 문서를 생성해주는 도구다.
- **Drafter**: API Blueprint를 파싱하고 분석해주는 라이브러리다.

### 6. Stoplight
Stoplight는 API 설계, 개발, 문서화를 위한 통합 도구다. OpenAPI, RAML, API Blueprint 등을 지원하며, 다양한 기능을 제공한다.
- **Stoplight Studio**: 시각적 인터페이스를 통해 API를 설계하고 문서화할 수 있다.
- **Mock Server**: API의 모의 서버를 생성하여 테스트할 수 있다.
- **Documentation**: 자동으로 API 문서를 생성하고, 인터랙티브한 문서를 제공한다.


## 예제 1: OpenAPI

API 문서화를 위한 가장 인기 있는 사양 중 하나인 OpenAPI를 사용하여 API를 문서화하는 구체적인 방법을 살펴보자. OpenAPI를 사용하면 표준화된 형식으로 API의 엔드포인트, 요청/응답 형식, 인증 방법을 표현할 수 있다.

```yaml
openapi: 3.0.0
info:
  title: User Management API
  version: 1.0.0
paths:
  /users:
    get:
      summary: 사용자 목록 조회
      parameters:
        - in: query
          name: limit
          schema:
            type: integer
          description: 반환할 최대 사용자 수
      responses:
        '200':
          description: 사용자 객체의 JSON 배열
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
    post:
      summary: 새로운 사용자 생성
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewUser'
      responses:
        '201':
          description: 생성됨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        email:
          type: string
    NewUser:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
```

이 YAML 파일은 GET(사용자 조회)과 POST(새 사용자 생성) 메서드를 모두 지원하는 `/users` 엔드포인트가 있는 API를 설명한다. 또한 User와 NewUser 객체의 구조도 정의하고 있다. 이 사양은 API 제공자와 소비자 간의 계약같은 역할을 하여 API 사용을 쉽게 만들어 준다. 이 사양을 Swagger UI를 이용해 다음과 같이 문서화할 수 있다.

![Swagger UI](/postImages/swagger-ui.jpg)

## 예제 2: RAML

RAML과 OpenAPI는 모두 API 사양을 정의하는 언어다. OpenAPI가 보편적으로 많이 채택되고 보다 광범위한 도구 지원을 제공하는 반면, RAML은 간결한 구문과 가독성에 중점을 둔다.

```yaml
#%RAML 1.0
title: User Management API
version: 1.0.0
baseUri: http://api.example.com

types:
  User:
    type: object
    properties:
      id: integer
      name: string
      email: string
  NewUser:
    type: object
    properties:
      name: string
      email: string

/users:
  get:
    description: 사용자 목록 조회
    queryParameters:
      limit:
        type: integer
        description: 반환할 최대 사용자 수
    responses:
      200:
        body:
          application/json:
            type: User[]
            example:
              [
                { "id": 1, "name": John Doe", "email": "john@example.com" },
                { "id": 2, "name": Jane Smith", "email": "jane@example.com" }
              ]
  post:
    description: 새로운 사용자 생성
    body:
      application/json:
        type: NewUser
        example:
          { "name": Alice Johnson", "email": "alice@example.com" }
    responses:
      201:
        body:
          application/json:
            type: User
            example:
              { "id": 3, "name": Alice Johnson", "email": "alice@example.com" }
```

이 RAML 사양은 OpenAPI 예시와 동일한 API 기능을 설명한다:

1. 버전 1.0.0의 User Management API를 정의한다.
2. `User`와 `NewUser`라는 두 가지 데이터 유형을 지정한다.
3. 두 가지 메서드가 있는 `/users` 엔드포인트를 설명한다:
   - GET: 선택적 `limit` 쿼리 파라미터와 함께 사용자 목록을 검색한다.
   - POST: 새 사용자를 생성한다.
4. 두 메서드에 대한 예시 응답을 제공한다.

RAML과 OpenAPI의 주요 차이점은 구문과 구조에 있으나, 둘 다 API를 문서화 한다는 동일한 목적을 제공한다. RAML은 더 간결하고 구조를 보여주기 위해 들여쓰기를 사용하는 반면, OpenAPI(특히 YAML 형식에서)는 더 명시적인 키-값 쌍을 사용한다.

# API 문서화를 위한 모범 사례

API 문서화를 가능한 한 효과적으로 만들기 위해 다음사항을 고려하자.

1. 문서 전체에 일관된 용어를 사용한다.
2. 각 엔드포인트, 파라미터, 응답에 대해 명확하고 간결한 설명을 제공한다.
3. 각 엔드포인트에 대한 요청과 응답의 예시를 포함한다.
4. 오류 응답과 코드를 문서화한다.
5. API가 발전함에 따라 문서를 최신 상태로 유지한다.

인기 있는 결제 처리 플랫폼인 Stripe는 우수한 API 문서로 유명하다. 그들은 OpenAPI 사양을 사용하여 실행 가능한 예시, 명확한 설명, 사용자 친화적인 문서를 제공한다. 이런 문서화 덕분에 Stripe는 개발자 커뮤니티에서 좋은 평판을 갖게 됐고 개발자들이 선택하는 결제 플랫폼이 되었다.

# 결론은 Design First!

API 문서화를 주제로 다뤘지만 이를 가능하게 하려면 API 사양이 먼저 작성되야 하는 걸 알았다. API를 구현하기 전에 철저히 설계하고 그 사양을 팀과  공유하며, 마지막으로 사양에 기반하여 자동으로 작성된 문서를 게시/공유함으로써 모두가 만족하는 API를 개발/제공할 수 있을 것이다.

이런 설계와 문서화 과정이 추가 업무로 보일 수 있으나, 이는 팀의 생산성을 크게 높이고 향후 문제를 줄여준다.

다음 API 개발에 뛰어들기 전에 잠시 시간을 내어 설계와 문서화를 생각해 보자. 미래의 당신, 당신의 팀, 그리고 API 사용자들이 감사할 것이다.



